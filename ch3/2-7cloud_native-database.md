---
authors: ["曹剑"]
company: ["百度云"]
reviewers: ["刘如明"]
---
# 7.	云原生数据库

Gartner在数据库市场分析报告中预测到2022年，75%的数据库将被部署或迁移至云平台，只有5%的数据库会考虑部署在本地。事实上，巨大的变革正在发生。在国外，以AWS为主的云厂商已实现云技术与数据库的融合，在逐步挑战与吞噬传统数据库厂商市场份额。在国内，云+数据库的发展也已到了下半场，数据库正在不断深度融合云计算的特性，为用户提供高弹性、分布式、低成本的极致使用体验。

回顾数据库的发展历程，大致可分为三个阶段：第一阶段是传统IT架构，基于物理机进行部署。业务部门采购时需为未来业务增量预留资源，存在着显著的资源浪费；而当业务快速增长时，资源的采购周期又无法满足业务快速扩张的需求。此外，传统IT架构下服务器故障恢复时间较长，对数据库影响明显。综上所述，传统IT架构下的数据库存在着高成本，低效率，稳定性差等诸多问题。

第二阶段是数据库上云。在这一架构下，厂商对外提供云数据库服务，基于云的弹性调度和虚机迁移等能力提高了数据库的弹性和稳定性。但受限于传统数据库技术能力限制，这一架构同样存在很多问题：随着业务量的极速增长，单台服务器无法存储几十、上百TB数据；同时云数据库系统的并发访问量相比传统架构有数量级的增长，导致数据同步延时严重，可用性降低。当前解决这些问题的方式主要有业务拆分及采用分库分表的分布式数据库架构两种方式，但以上两种方法同时会带来系统复杂度提高、扩展操作难度大的问题。

第三阶段是云原生数据库。这种数据库采用计算存储分离的架构，遵循“日志即数据”的原则，计算层能够自动实现读写分离，单集群可扩展到16个节点，同时具备秒级的扩缩容能力；存储层采用多租户分布式高可用存储系统，单集群一般可扩展到100TB以上。

总体来看，相对于传统数据库云原生数据库主要有以下几方面优势：
1）标准化：云原生数据库本身使用Kubernetes等云原生平台进行部署，以PaaS的形式对外提供服务，提供近似对象存储的使用体验。这使得数据库无论是在资源使用，还是应用部署，亦或是业务调用上都实现了标准化。
2）降低成本：与现有数据库架构不同，用户无需提前预留资源，仅需为使用的资源进行付费；受益于计算存储分离架构，增加从库时不会增加存储成本，仅需为计算资源付费。经对比发现，云原生架构数据库成本仅为传统商业数据库的1/10。
3）研发效率提升：云原生数据库一般兼容现有数据协议，业务无需修改即可进行迁移。同时数据库提供的100TB以上的空间可满足绝大部分应用需求，免去了分库分表所带来的数据一致性问题，研发仅需要关注业务逻辑即可。效率的提升可以帮助产品快速迭代，不断创新，从而迅速抢占市场。
4）稳定性：传统数据库稳定性严重依赖底层资源，当资源故障时需进行数据迁移，导致故障恢复时间过长。在云原生架构下，计算节点故障时无需拷贝数据，仅需创建新的资源承载流量即可，可做到秒级别的故障恢复。而存储节点一搬采用分布式多副本的架构，其故障更是对业务无感。