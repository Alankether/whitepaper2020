---
authors: ["朱松、赵华"]
company: ["阿里云、华为"]
reviewers: ["刘如明"]
---

## 4.	容器技术：从通用向多元化发展

### （1）	安全容器

容器技术的采纳率连年提升，已经开始进入企业的生产环境。以Docker为代表的普通容器通过Namespaces和cGroups实现的隔离，共享内核的机制使得隔离性具有天然的缺陷无法根除，在多租户场景下安全问题更加凸显：

**内核Bug引发容器逃逸，** 操作系统内核漏洞、Docker组件设计缺陷、不当的配置等都会导致Docker容器发生逃逸。由于频发的安全及逃逸漏洞，一般在云环境中的容器应用不得不运行在虚拟机中，以满足多租户安全隔离要求。而分配、管理、运维这些传统虚拟机与容器轻量、灵活、弹性的初衷相悖，同时在资源利用率、运行效率上也存在不足。**内核资源竞争影响业务性能，** 同一个宿主机上的不同 Pod，实际上是不同的用户态进程的集合，这些用户态进程虽然在 namespace 上是相互隔离的，但他们还是会共享很多内核资源，比如调度器、某些内核线程或者对象。这种级别的资源共享会引入很多可以观测到的性能抖动，对在线业务的影响也很明显。

与Docker普通容器不同，安全容器通过添加隔离层，给进程分配了一个独立的操作系统内核，从而避免了让容器共享宿主机的内核。因此容器进程能够看到的攻击面，就从整个宿主机内核变成了一个极小的、独立的、以容器为单位的内核，从而有效解决了容器进程发生“逃逸”或者夺取整个宿主机的控制权的问题。

### （2）	Serverless容器

FaaS平台提供的是函数级别的Serverless化部署，且应用场景多依赖于其绑定的触发器，对函数的执行有一些配置限制，并且不支持进程常驻。传统的应用大都是单体应用或者微服务应用，在迁移到FaaS平台时，需要拆分函数，迁移成本较高。

Serverless容器，可以很好地弥补FaaS的不足，Serverless容器可以支持进程常驻的服务形态，不限运行时长，并扩大Serverless的应用场景。Serverless容器支持服务的形态，传统的单体应用或者微服务应用，几乎可以无缝迁移到Serverless容器平台上。

Serverless容器和传统的容器相比，为了实现Serverless的理念，在如下几个方面做了加强：**免运维的纯托管模式，** 传统的容器往往是直接将容器集群托管给业务方，业务方需要分担容器集群的一些运维工作。Serverless容器则把容器集群完全托管给云厂商，由云厂商进行集群的运维工作，用户不用关注这些运维工作，只需部署自己的业务逻辑即可；**以实际资源用量计费，** 传统的容器是按照容器的实例配置进行计费的，Serverless容器是按照实际资源使用量进行计费；**秒级弹性伸缩响应，** 传统的容器往往借助于容器编排工具来实现弹性伸缩，比如通过Kubernetes可以实现Docker的容器的弹性伸缩，但是Kubernetes伸缩时间是分钟级的，而Serverless容器能够提供更加极致的伸缩能力，做到秒级伸缩并且资源实例和伸缩至零。
